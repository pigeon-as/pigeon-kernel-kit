# TC + eBPF (in-guest network policy, required by tc-redirect-tap pattern)
# Dependency chain: NET_CLS_BPF requires NET_SCHED + NET_CLS_ACT
CONFIG_NET_SCHED=y
CONFIG_BPF=y
CONFIG_BPF_SYSCALL=y
CONFIG_CGROUP_BPF=y
CONFIG_NET_CLS_ACT=y
CONFIG_NET_CLS_BPF=y
CONFIG_NET_ACT_BPF=y
CONFIG_CGROUPS=y

# WireGuard mesh between VMs + TUN for userspace networking
CONFIG_WIREGUARD=y
CONFIG_TUN=y

# LVM / device-mapper (NVMe thin-provisioned slices per VM)
# DAX conflicts with device-mapper and is not needed in Firecracker guests.
# CONFIG_DAX is not set
CONFIG_MD=y
CONFIG_BLK_DEV_DM=y
CONFIG_DM_THIN_PROVISIONING=y
CONFIG_DM_SNAPSHOT=y
CONFIG_DM_CACHE=y
CONFIG_DM_MIRROR=y

# Virtio-mmio enumeration via kernel cmdline (used on x86_64, harmless on aarch64).
CONFIG_VIRTIO_MMIO_CMDLINE_DEVICES=y
